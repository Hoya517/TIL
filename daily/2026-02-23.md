# TIL - Event Driven Architecture & Spring Cloud Stream

## 1. 이벤트 드리븐 아키텍처 (EDA)

### 1.1 개념 정리

이벤트 드리븐 아키텍처는 시스템 내에서 발생하는 **이벤트(상태 변화)**를
중심으로 동작하는 설계 방식이다.

이벤트는 비동기적으로 전달되며, 서비스 간 직접 호출 대신 메시지 기반
통신을 사용한다.

------------------------------------------------------------------------

## 2. 핵심 구성 요소

### ✔ Event

-   상태 변화 또는 행동을 나타내는 메시지
-   예: 주문 생성, 결제 완료, 배송 시작

### ✔ Event Source (Producer)

-   이벤트를 생성하는 주체
-   예: 주문 서비스

### ✔ Event Handler (Consumer)

-   이벤트를 수신하여 처리하는 주체
-   예: 재고 서비스, 결제 서비스

### ✔ Event Bus (Message Broker)

-   이벤트를 중개하는 역할
-   Kafka, RabbitMQ 등

------------------------------------------------------------------------

## 3. 이벤트 드리븐 아키텍처의 장점

### 3.1 느슨한 결합

-   서비스 간 직접 의존 제거
-   독립적인 배포 가능
-   확장성 향상

### 3.2 확장성

-   Producer / Consumer 개별 확장 가능
-   트래픽 증가 시 수평 확장 용이

### 3.3 비동기 처리

-   요청-응답 구조 탈피
-   시스템 응답성 향상
-   병렬 처리 가능

------------------------------------------------------------------------

## 4. 단점 및 고려 사항

### 4.1 복잡성 증가

-   이벤트 흐름 추적 어려움
-   상태 관리 복잡

### 4.2 장애 전파 가능성

-   메시지 유실/중복 처리 문제
-   재처리 전략 필요 (Retry, DLQ 등)

------------------------------------------------------------------------

## 5. 온라인 쇼핑몰 예시 흐름

1.  주문 서비스 → "주문 생성 이벤트" 발행
2.  Kafka가 이벤트 전달
3.  재고 서비스 → 재고 차감
4.  결제 서비스 → 결제 처리
5.  배송 서비스 → 배송 시작

→ 서비스 간 직접 호출 없이 동작

------------------------------------------------------------------------

## 6. Spring Cloud Stream

### 6.1 개념

Spring Cloud Stream은 이벤트 기반 마이크로서비스 구축을 위한
프레임워크이다.

메시지 브로커(Kafka, RabbitMQ 등)와의 통합을 추상화하여 Producer /
Consumer 구현을 단순화한다.

------------------------------------------------------------------------

## 7. 주요 특징

### ✔ Binder 추상화

-   Kafka, RabbitMQ 등 교체 가능
-   코드 변경 없이 브로커 변경 가능

### ✔ Producer / Consumer 모델

-   함수형 방식 지원
-   @Bean 기반 메시지 핸들링

### ✔ 설정 중심 구조

-   application.yml 기반 바인딩 설정

------------------------------------------------------------------------

## 8. 오늘의 학습 정리

-   MSA에서 서비스 간 결합도를 낮추는 핵심 전략은 이벤트 기반 통신
-   동기 REST 호출 대비 높은 확장성과 탄력성 확보 가능
-   대신 메시지 관리 전략, 재처리 정책, 모니터링 설계가 필수

EDA는 단순 메시징이 아니라, "비동기 기반 시스템 설계 방식"이라는 점을
이해함.
