# 📘 TIL - 인메모리 저장소와 캐싱 전략 (Redis)

> 작성일: 2026-02-25

------------------------------------------------------------------------

## 1. 인메모리 저장소가 필요한 이유

### 🔹 기존 RDB의 특성

Spring Boot에서 사용하는 관계형 데이터베이스(RDB)는\
**영속성(Persistence)** 을 목적으로 한다.

-   SSD/HDD 같은 파일 시스템에 저장
-   서버가 종료되어도 데이터 유지
-   대신 디스크 I/O로 인해 읽기/쓰기 속도가 상대적으로 느림

👉 파일 시스템 기반 데이터 변경은 구조적으로 느릴 수밖에 없다.

------------------------------------------------------------------------

### 🔹 서비스에서 발생하는 일시적 데이터

-   로그인 세션
-   장바구니
-   인증 토큰
-   게시글 조회수
-   실시간 랭킹

이 데이터들은:

-   변경이 빈번하고
-   오래 보관할 필요가 없으며
-   빠른 응답이 중요하다

따라서 디스크 기반 DB보다는\
👉 **메모리 기반 저장소가 적합하다.**

------------------------------------------------------------------------

## 2. Redis란?

Redis = **REmote DIctionary Server**

-   Key-Value 구조 기반
-   Java의 `Map`, Python의 `Dictionary`와 유사
-   대표적인 **In-Memory NoSQL Database**

``` redis
SET greeting "Hello, Redis!"
GET greeting
```

------------------------------------------------------------------------

## 3. Redis의 핵심 특징

### 1️⃣ In-Memory Database

-   데이터를 RAM에 저장
-   디스크 I/O 없음
-   매우 빠른 읽기/쓰기 속도

✔ 장점: 고성능\
✖ 단점: 기본적으로 휘발성

------------------------------------------------------------------------

### 2️⃣ NoSQL (Not Only SQL)

Redis는 SQL을 사용하지 않는다.

관계형 DB:

``` sql
SELECT * FROM users;
```

Redis:

``` redis
SET key value
GET key
```

NoSQL 특징:

-   스키마 없음
-   확장성에 강함
-   비정형 데이터 처리에 적합

------------------------------------------------------------------------

## 4. Redis 자료구조

  자료형       설명               활용 예시
  ------------ ------------------ ----------------
  String       기본 타입          토큰 저장
  List         순서 있는 데이터   최근 조회 목록
  Set          중복 없는 집합     좋아요 사용자
  Hash         객체 구조          사용자 정보
  Sorted Set   점수 기반 정렬     실시간 랭킹

------------------------------------------------------------------------

## 5. 캐싱 전략

### 🔥 캐시(Cache)란?

> 자주 사용하는 데이터를 미리 저장해두고 빠르게 조회하는 전략

------------------------------------------------------------------------

### 1️⃣ Cache Aside (Lazy Loading)

동작 흐름:

1.  캐시 조회
2.  없으면 DB 조회
3.  DB 결과를 캐시에 저장
4.  반환

장점: - 구현 단순 - 필요한 데이터만 캐싱

단점: - 최초 요청 시 느림 (Cold Start) - 캐시/DB 불일치 가능성

------------------------------------------------------------------------

### 2️⃣ Write Through

-   DB 저장
-   동시에 Cache 저장

✔ 데이터 정합성 높음\
✖ 쓰기 비용 증가

------------------------------------------------------------------------

### 3️⃣ Write Back (Write Behind)

-   Cache에 먼저 저장
-   일정 시간 후 DB 반영

✔ 쓰기 성능 우수\
✖ 장애 시 데이터 유실 위험

------------------------------------------------------------------------

## 6. Redis 설치 방법 정리

### 🔹 Mac

``` bash
brew install redis
brew services start redis
```

### 🔹 Docker (권장)

``` bash
docker compose up -d
docker compose ps
```

Redis Stack을 사용하면 Redis Insight까지 함께 사용 가능.

------------------------------------------------------------------------

## 7. RDB vs Redis 비교

  구분        RDB           Redis
  ----------- ------------- ------------
  저장 위치   디스크        메모리
  속도        느림          매우 빠름
  영속성      강함          약함
  구조        스키마 기반   Key-Value
  용도        영구 데이터   캐시, 세션

------------------------------------------------------------------------

## 💡 오늘의 핵심 정리

-   Redis는 메모리 기반 NoSQL DB
-   빠른 응답이 필요한 데이터에 적합
-   실무에서는 RDB + Redis 조합이 일반적
-   캐싱 전략은 트래픽 특성에 맞게 선택해야 한다

------------------------------------------------------------------------

## 📌 앞으로 고민할 것

-   TTL 전략 설계
-   캐시 무효화 전략
-   분산 환경에서 Redis 구성
-   MSA 환경에서의 Redis 활용
